#Extractors are wrriten in the format name_pipeline: extractor1, extractor2, extractor3.
#The name of the extractor is followed by ":", the extractors are separeted by commas and the last extractor ends with a "."

#This pipeline helps to put data in the database. Each extractor "name_extractor" calls the corresponding init_name_extractor.sh scripts located in input/
load_pipeline:   
      allowed_phenos,
      genes,
      genepheno_holdout_set,
      genepheno_holdout_labels,
      gene_holdout_set, 
      gene_holdout_labels,
      hpo_abnormalities,
      charite,
      charite_canon,
      hgvs_hpo.

cleanup_doc_pipeline: 
      cleanup_doc_ids1,
      cleanup_doc_ids2.

#To find the name of an extractor from ddlog, the app.ddlog needs to be compiled (with for instance the command ~/local/bin/ddlog compile $APP_HOME/app.ddlog > $APP_HOME/deepdive_compiled.conf) and the corresponding extractor needs to be found (manually for now) in the compiled file. Then we can add this extractor in the pipeline.

full_pipeline_ddlog_part_before_serialize_genepheno_pairs_split:
      #add serialize_sentences here at the beginning. Not right now since it's done in temp_script_initdb.sh but when we don't try with application.conf anymore

      ext_gene_extract_candidates_view_temp,
      ext_gene_mentions_temp_before_non_gene_acronyms_delete_candidates_by_gene_extract_candidates,
      ext_non_gene_acronyms_extract_candidates_view_temp_1,
      ext_non_gene_acronyms_extract_candidates_view_temp_2,
      ext_non_gene_acronyms_by_non_gene_acronyms_extract_candidates,
      #This extractor is to export data from pheno_mentions_without_acronyms to pheno_mentions.
      ext_pheno_mentions,
      ext_pheno_mentions_without_acronyms_by_pheno_extract_candidates,
      ext_gene_mentions_non_gene_acronyms_view_temp,
      ext_gene_mentions_non_gene_acronyms,
      ext_pheno_acronyms_extract_candidates_view_temp_1,
      ext_pheno_acronyms_extract_candidates_view_temp_2,
      ext_pheno_acronyms_by_pheno_acronyms_extract_candidates,
      ext_pheno_acronyms_aggregate,
      ext_pheno_acronyms_ids,
      ext_sentences_input_with_pheno_acronyms,
      ext_pheno_mentions_by_pheno_acronyms_insert_candidates.


full_pipeline_cut_for_bug_in_dependencies:
      ext_gene_mentions,
      ext_gene_features_by_gene_extract_features,
      ext_genepheno_pairs.

full_pipeline_ddlog_part_after_serialize_genepheno_pairs_split:
      ext_genepheno_relations_by_genepheno_extract_candidates, 
      ext_gene_mentions_filtered,
      ext_gene_mention_ids,
      ext_sentences_input_with_gene_mention,
      ext_genepheno_features_by_genepheno_extract_features,
      ext_genepheno_association_by_genepheno_association_supervision,
      ext_genepheno_causation_by_genepheno_causation_supervision,
      #Adding the supervision rules, particular at ddlog since the inference is made in other tables, not directly in a column of an existing table. For instance, the variable is_true of gene_mentions_filtered, we create the table gene_mentions_filtered_inference
      ext_gene_mentions_filtered_inference,
      ext_genepheno_causation_inference,
      ext_genepheno_association_inference,
      inf_istrue_gene_mentions_filtered_inference,
      inf_istrue_genepheno_association_inference,
      inf_istrue_genepheno_causation_inference,
      inf_imply_genepheno_association_inference_gene_mentions_filtered_inference,
      inf_imply_genepheno_causation_inference_gene_mentions_filtered_inference,
      #adding extractor for the views
      ext_sentences_input_views,
      ext_gene_mentions_views,
      ext_pheno_mentions_views,
      ext_genepheno_association_views,
      ext_genepheno_causation_views.




#     test: test1, test2, #test3,    test4.