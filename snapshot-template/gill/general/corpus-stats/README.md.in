<$
report-log "Creating a few corpus stats"
num_documents=$(run-sql "
SELECT
  count(DISTINCT a.pmid)
  FROM
    (SELECT doc_id as pmid
     FROM (SELECT doc_id FROM sentences_input) b) a
")
num_sources=$(run-sql "
SELECT count(DISTINCT source)
FROM
  sentences_input si
  JOIN document_metadata ON (si.doc_id = document_metadata.doc_id)
")
num_sentences=$(run-sql "
SELECT count(*)
FROM
  sentences_input;
")
num_candidates_docs_with_genes=$(run-sql "
SELECT
  count(DISTINCT doc_id)
  FROM gene_mentions
  WHERE is_correct != 'f' OR is_correct IS NULL;
")
num_candidates_docs_with_phenos=$(run-sql "
SELECT
  count(DISTINCT doc_id)
  FROM pheno_mentions
  WHERE is_correct != 'f' OR is_correct IS NULL;
")
num_candidates_docs_with_genepheno_association=$(run-sql "
SELECT
  count(DISTINCT doc_id)
  FROM genepheno_association
  WHERE is_correct != 'f' OR is_correct IS NULL;
")
num_candidates_docs_with_genepheno_causation=$(run-sql "
SELECT
  count(DISTINCT doc_id)
  FROM genepheno_causation
  WHERE is_correct != 'f' OR is_correct IS NULL;
")
num_inferred_docs_with_genes=$(run-sql "
SELECT
  count(DISTINCT doc_id)
  FROM gene_mentions_is_correct_inference WHERE expectation > 0.9;
")
num_inferred_docs_with_phenos=$(run-sql "
SELECT
  count(DISTINCT doc_id)
  FROM pheno_mentions_is_correct_inference WHERE expectation > 0.9;
")
num_inferred_docs_with_genepheno_association=$(run-sql "
SELECT
  count(DISTINCT doc_id)
  FROM genepheno_association_is_correct_inference WHERE expectation > 0.9;
")
num_inferred_docs_with_genepheno_causation=$(run-sql "
SELECT
  count(DISTINCT doc_id)
  FROM genepheno_causation_is_correct_inference WHERE expectation > 0.9;
")
num_genes_candidates=$(run-sql "
select count(distinct entity) from gene_mentions where is_correct = 't' or is_correct is null
")
num_phenos_candidates=$(run-sql "
select count(distinct entity) from pheno_mentions where is_correct = 't' or is_correct is null
")
num_genes_in_pairs_candidates_before_supervision=$(run-sql "
select count(distinct gene_entity) from genepheno_relations
")
num_phenos_in_pairs_candidates_before_supervision=$(run-sql "
select count(distinct pheno_entity) from genepheno_relations
")
num_genes_in_association_pairs_candidates=$(run-sql "
select count(distinct gene_entity) from genepheno_association where is_correct = 't' or is_correct is null
")
num_phenos_in_association_pairs_candidates=$(run-sql "
select count(distinct pheno_entity) from genepheno_association where is_correct = 't' or is_correct is null
")
num_genes_in_causation_pairs_candidates=$(run-sql "
select count(distinct gene_entity) from genepheno_causation where is_correct = 't' or is_correct is null
")
num_phenos_in_causation_pairs_candidates=$(run-sql "
select count(distinct pheno_entity) from genepheno_causation where is_correct = 't' or is_correct is null
")
num_genepheno_association_candidates=$(run-sql "
select count(*) from
(select distinct gene_entity, pheno_entity from genepheno_association where is_correct is null or is_correct = 't') a
")
num_genepheno_causation_candidates=$(run-sql "
select count(*) from
(select distinct gene_entity, pheno_entity from genepheno_causation where is_correct is null or is_correct = 't') a
")

num_genes_inferred=$(run-sql "
select count(distinct entity) from gene_mentions_is_correct_inference where expectation > 0.9
")
num_phenos_inferred=$(run-sql "
select count(distinct entity) from pheno_mentions_is_correct_inference where expectation > 0.9
")
num_genes_in_association_pairs_inferred=$(run-sql "
select count(distinct gene_entity) from genepheno_association_is_correct_inference where expectation > 0.9
")
num_phenos_in_association_pairs_inferred=$(run-sql "
select count(distinct pheno_entity) from genepheno_association_is_correct_inference where expectation > 0.9
")
num_genes_in_causation_pairs_inferred=$(run-sql "
select count(distinct gene_entity) from genepheno_causation_is_correct_inference where expectation > 0.9
")
num_phenos_in_causation_pairs_inferred=$(run-sql "
select count(distinct pheno_entity) from genepheno_causation_is_correct_inference where expectation > 0.9
")
num_genepheno_association_inferred=$(run-sql "
select count(*) from
(select distinct gene_entity, pheno_entity from genepheno_association_is_correct_inference where expectation > 0.9) a
")
num_genepheno_causation_inferred=$(run-sql "
select count(*) from
(select distinct gene_entity, pheno_entity from genepheno_causation_is_correct_inference where expectation > 0.9) a
")

# store the numbers
report-values \
    num_documents=$num_documents \

    num_genes_candidates=$num_genes_candidates \
    num_phenos_candidates=$num_phenos_candidates \
    num_genes_in_pairs_candidates_before_supervision=$num_genes_in_pairs_candidates_before_supervision \
    num_phenos_in_pairs_candidates_before_supervision=$num_phenos_in_pairs_candidates_before_supervision \
    num_genes_in_association_pairs_candidates=$num_genes_in_association_pairs_candidates \
    num_phenos_in_association_pairs_candidates=$num_phenos_in_association_pairs_candidates \
    num_genes_in_causation_pairs_candidates=$num_genes_in_causation_pairs_candidates \
    num_phenos_in_causation_pairs_candidates=$num_phenos_in_causation_pairs_candidates \
    num_genepheno_association_candidates=$num_genepheno_association_candidates \
    num_genepheno_causation_candidates=$num_genepheno_causation_candidates \

    num_genes_inferred=$num_genes_inferred \
    num_phenos_inferred=$num_phenos_inferred \
    num_genes_in_association_pairs_inferred=$num_genes_in_association_pairs_inferred \
    num_phenos_in_association_pairs_inferred=$num_phenos_in_association_pairs_inferred \
    num_genes_in_causation_pairs_inferred=$num_genes_in_causation_pairs_inferred \
    num_phenos_in_causation_pairs_inferred=$num_phenos_in_causation_pairs_inferred \
    num_genepheno_association_inferred=$num_genepheno_association_inferred \
    num_genepheno_causation_inferred=$num_genepheno_causation_inferred \

    num_journals=$num_journals \
    num_sentences_in_journals=$num_sentences_in_journals \
    num_candidates_docs_with_genes=$num_candidates_docs_with_genes \
    num_candidates_docs_with_phenos=$num_candidates_docs_with_phenos \
    num_candidates_docs_with_genepheno_association=$num_candidates_docs_with_genepheno_association \
    num_candidates_docs_with_genepheno_causation=$num_candidates_docs_with_genepheno_causation \
    num_inferred_docs_with_genes=$num_inferred_docs_with_genes \
    num_inferred_docs_with_phenos=$num_inferred_docs_with_phenos \
    num_inferred_docs_with_genepheno_association=$num_inferred_docs_with_genepheno_association \
    num_inferred_docs_with_genepheno_causation=$num_inferred_docs_with_genepheno_causation \
    #
$>

### Number of documents and sentences

* **<$ printf "%'d" $num_documents $>** documents
* **<$ printf "%'d" $num_journals $>** journals
* **<$ printf "%'d" $num_sentences_in_journals $>** sentences in journals

### Number of genes and phenos

#### Number of distinct gene candidates

* **<$ printf "%'d" $num_genes_candidates $>** unique gene candidates (true/null)
* **<$ printf "%'d" $num_genes_in_pairs_candidates_before_supervision $>** unique genes in genepheno pairs before any supervision
* **<$ printf "%'d" $num_genes_in_association_pairs_candidates $>** unique genes in genepheno association candidates (true/null)
* **<$ printf "%'d" $num_genes_in_causation_pairs_candidates $>** unique genes in genepheno causation candidates (true/null)

#### Number of distinct genes after inference

* **<$ printf "%'d" $num_genes_inferred $>** unique genes (E &gt; 0.9)
* **<$ printf "%'d" $num_genes_in_association_pairs_inferred $>** unique genes in association pairs (E &gt; 0.9)
* **<$ printf "%'d" $num_genes_in_causation_pairs_inferred $>** unique genes in causation pairs (E &gt; 0.9)

#### Number of distinct pheno candidates

* **<$ printf "%'d" $num_phenos_candidates $>** unique pheno candidates (true/null)
* **<$ printf "%'d" $num_phenos_in_pairs_candidates_before_supervision $>** unique phenos in genepheno pairs before any supervision
* **<$ printf "%'d" $num_phenos_in_association_pairs_candidates $>** unique phenos in genepheno association candidates (true/null)
* **<$ printf "%'d" $num_phenos_in_causation_pairs_candidates $>** unique phenos in genepheno causation candidates (true/null)

#### Number of distinct phenos after inference

* **<$ printf "%'d" $num_phenos_inferred $>** unique phenos (E &gt; 0.9)
* **<$ printf "%'d" $num_phenos_in_association_pairs_inferred $>** unique phenos in association pairs (E &gt; 0.9)
* **<$ printf "%'d" $num_phenos_in_causation_pairs_inferred $>** unique phenos in causation pairs (E &gt; 0.9)

#### Number of distinct genepheno candidates

* **<$ printf "%'d" $num_genepheno_association_candidates $>** unique genepheno association candidates (true/null)
* **<$ printf "%'d" $num_genepheno_causation_candidates $>** unique genepheno causation candidates (true/null)

#### Number of distinct genephenos after inference

* **<$ printf "%'d" $num_genepheno_association_inferred $>** unique association genephenos (E &gt; 0.9)
* **<$ printf "%'d" $num_genepheno_causation_inferred $>** unique causation genephenos (E &gt; 0.9)


### Number of documents for candidate extractions

* **<$ printf "%'d" $num_candidates_docs_with_genes $>** documents with (true/null) candidate gene mentions
* **<$ printf "%'d" $num_candidates_docs_with_phenos $>** documents with (true/null) pheno mentions
* **<$ printf "%'d" $num_candidates_docs_with_genepheno_association $>** documents with (true/null) candidate genepheno association mentions
* **<$ printf "%'d" $num_candidates_docs_with_genepheno_causation $>** documents with (true/null) candidate genepheno causation mentions

### Number of documents after inference

* **<$ printf "%'d" $num_inferred_docs_with_genes $>** documents with (E &gt; 0.9) inferred gene mentions
* **<$ printf "%'d" $num_inferred_docs_with_phenos $>** documents with (E &gt; 0.9) pheno mentions
* **<$ printf "%'d" $num_inferred_docs_with_genepheno_association $>** documents with (E &gt; 0.9) inferred genepheno association mentions
* **<$ printf "%'d" $num_inferred_docs_with_genepheno_causation $>** documents with (E &gt; 0.9) inferred genepheno causation mentions

